{% extends "_common.html" %}

{% block title %}{{ post.title }} | N3rdL0rd's writeups{% endblock %}

{% block main %}
<div class="content-wrapper">
    <main class="main-content">
        <article class="post-content">
            <header class="post-header">
                <h1>{{ post.title|safe }}</h1>
                
                <div class="card-meta">
                    <time><i class="fa-regular fa-calendar"></i> {{ post.date }}</time>
                    {% if post.author %}
                        <span>&bull;</span> <span>{{ post.author }}</span>
                    {% endif %}
                    
                    {% if post.tags %}
                        <span>&bull;</span>
                        {% for tag in post.tags %}
                        <a class="tag-pill" href="/posts/tag/{{ tag }}">{{ tag }}</a>
                        {% endfor %}
                    {% endif %}
                </div>
            </header>

            <!-- Markdown Content -->
            <div class="md-content">
                {{ post.content|safe }}
            </div>
        </article>
    </main>
    
    <aside class="blog-sidebar">
        <h3 style="margin-top:0; color: var(--header-color);">Recent Posts</h3>
        
        <div class="sidebar-list">
            {% for recent in recent_posts %}
                {% if recent.url != post.url %}
                <div class="post-card" style="padding: 1rem; margin-bottom: 1rem;">
                    <h4 style="margin: 0 0 0.5rem 0; font-size: 1.1rem;">
                        <a href="{{ recent.url }}">{{ recent.title }}</a>
                    </h4>
                    <div class="card-meta" style="margin-bottom: 0.5rem;">
                        <time>{{ recent.date }}</time>
                    </div>
                    <div style="font-size: 0.9rem; color: var(--text-300);">
                        {{ recent.excerpt[:80] }}...
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        </div>

        <div style="margin-top: 2rem;">
            <h3><a href="/posts" style="color: var(--secondary-400);">View All &rarr;</a></h3>
        </div>
    </aside>
</div>
{% endblock %}